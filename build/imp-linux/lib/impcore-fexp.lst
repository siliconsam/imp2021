         Edinburgh IMP77 Compiler - Version 8.4

   1  {------------------------------------------------------------------------------}
   2      ! Returns floating point x ^ p
   3      %external %long %real %function impfexp ( %integer p, %long %real x)
   4          %long %real r;
   5  
   6          %if (p = 0) %then %result = 1.0
   7          %if (x = 0.0) %then %result = 0.0
   8  
   9          ! deal with negative exponents
   10          %if (p < 0) %start
   11              x = 1.0/x
   12              p = -p
   13          %finish
   14  
   15          r = 1.0
   16          %cycle
   17              %if ((p & 1) # 0) %then r = r * x;
   18              p = p >> 1;
   19              %if (p = 0) %then %result = r;
   20              x = x * x;
   21          %repeat
   22      %end
   23  
   24  {------------------------------------------------------------------------------}
   25  %endoffile

   17 Statements compiled
