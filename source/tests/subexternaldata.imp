!
!
    %include "inc.test.external"

    %externalrecord(Eventfm) ASHANTI %alias "_XASHANTI"

    %externalintegerfn GetEvent %alias "_XGETEVENT"
        %result = ASHANTI_Event
    %end

    %externalintegerfn GetSub %alias "_XGETSUB"
        %result = ASHANTI_Sub
    %end

    %externalintegerfn GetExtra %alias "_XGETEXTRA"
        %result = ASHANTI_Extra
    %end

    %externalintegerfn GetMsgLen %alias "_XGETMSGLEN"
        %result = length(ASHANTI_Message)
    %end

    %externalstring(255)%fn GetMessage %alias "_XGETMESSAGE"
        %string(255) s
        s = ASHANTI_Message
        %result = s
    %end

    %externalroutine SetEvent %alias "_XSETEVENT" ( %integer e )
        ASHANTI_Event = e
    %end

    %externalroutine SetSub %alias "_XSETSUB" ( %integer s )
        ASHANTI_Sub = s
    %end

    %externalroutine SetExtra %alias "_XSETEXTRA" ( %integer x )
        ASHANTI_Extra = x
    %end

    %externalroutine SetMessage %alias "_XSETMESSAGE" ( %string(*) %name m )
        %own %integer count = 0

        count = count + 1;
        ASHANTI_Message = int2ascii( count, 10, 4).": ".m;
    %end

    %externalroutine init %alias "_XLL_INIT"
        ASHANTI_Event = 132
        ASHANTI_Sub = 12
        ASHANTI_Extra = 11
        ASHANTI_Message = "Ashanti, a people of Africa"
    %end

%endoffile

